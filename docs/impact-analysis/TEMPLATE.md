# 影響範囲分析テンプレート

> このテンプレートをコピーして、各変更ごとにファイルを作成してください
> ファイル名: `YYYY-MM-DD_変更内容の簡単な説明.md`

---

## 基本情報

- **日時**: YYYY-MM-DD HH:MM
- **担当者**:
- **チケット番号**: （あれば）
- **変更理由**:

---

## 変更内容

### 変更対象ファイル
- [ ] `src/path/to/file.ts`
- [ ] `src/path/to/another.ts`

### 変更概要
```
何をどう変更するか、簡潔に記述
```

### 変更前のコード
```typescript
// 変更前のコードを貼り付け
```

### 変更後のコード
```typescript
// 変更後のコードを貼り付け
```

---

## 影響範囲分析

### 1. 直接的な影響

#### インポート元の調査
```bash
# 実行したコマンド
grep -r "import.*ファイル名" src/

# 結果
- src/components/Component1.tsx
- src/lib/utils.ts
```

#### 関数/コンポーネントの使用箇所
```bash
# 実行したコマンド
grep -r "関数名" src/

# 結果
- src/app/page.tsx (line 10)
- src/components/Chat.tsx (line 25)
```

### 2. 間接的な影響

#### 依存関係ツリー
```
変更ファイル
  ├─ 直接呼び出し元A
  │   └─ さらに呼び出し元X
  └─ 直接呼び出し元B
      └─ さらに呼び出し元Y
```

#### データフロー
```
変更したデータ構造
  → 影響を受けるAPI
    → 影響を受けるコンポーネント
      → 影響を受けるUI
```

### 3. 型定義の変更

- [ ] 型定義を変更する場合、影響を受けるすべての箇所をリストアップ
- [ ] TypeScriptエラーが発生する箇所を事前確認

### 4. API契約の変更

- [ ] APIレスポンス形式の変更がある場合
- [ ] リクエストパラメータの変更がある場合
- [ ] エンドポイントURLの変更がある場合

---

## リスク評価

### 高リスク（破壊的変更）
- [ ] 既存のAPIを変更する
- [ ] データベーススキーマを変更する
- [ ] 認証フローを変更する

### 中リスク
- [ ] UIコンポーネントを変更する
- [ ] ビジネスロジックを変更する
- [ ] 状態管理を変更する

### 低リスク
- [ ] スタイリングのみの変更
- [ ] コメントの追加
- [ ] ログ出力の追加

---

## テスト計画

### ユニットテスト
- [ ] 変更した関数のテスト
- [ ] エッジケースのテスト

### 統合テスト
- [ ] 影響範囲のAPI動作確認
- [ ] データフロー全体のテスト

### E2Eテスト
- [ ] ユーザーフロー全体のテスト
- [ ] 既存機能が壊れていないことを確認

### 手動テスト項目
1. [ ]
2. [ ]
3. [ ]

---

## ロールバック計画

### ロールバック手順
1. Vercelダッシュボードで前のデプロイに戻す
2. （必要であれば）データベースをバックアップから復元

### ロールバック時の注意点
-

---

## ユーザー確認事項

### 確認が必要なポイント
1. 影響範囲は許容範囲内か？
2. リスクレベルは適切か？
3. テスト計画は十分か？

### ユーザー承認
- [ ] 影響範囲を確認し、実装を承認

---

## 実装後の結果

### テスト結果
- [ ] すべてのユニットテストが通過
- [ ] すべての統合テストが通過
- [ ] すべてのE2Eテストが通過
- [ ] 手動テストが完了

### 発見された問題
- なし / あり（以下に記載）

### 追加の変更
- なし / あり（以下に記載）

---

## 備考

その他、特記事項があれば記載
